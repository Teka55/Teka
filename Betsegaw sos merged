<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SOS Jimma Primary School & Student Zone</title>

    <!-- Google Fonts: Poppins (School) & Orbitron/Roboto Mono (Game) -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;700&family=Orbitron:wght@400;700;900&family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* =========================================
           1. SCHOOL SITE STYLES (Professional)
           ========================================= */
        html { scroll-behavior: smooth; }
        
        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f3f4f6;
            color: #333;
            line-height: 1.6;
        }

        a { text-decoration: none; }
        ul { list-style: none; padding: 0; }

        /* HEADER */
        header {
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        .header-container {
            max-width: 1200px;
            margin: auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 20px;
        }
        .logo-area { display: flex; align-items: center; gap: 15px; }
        .logo-area img { height: 60px; width: auto; }
        .logo-text h1 { font-size: 1.5rem; color: #1e40af; margin: 0; font-weight: 800; }
        .logo-text span { font-size: 0.8rem; color: #666; display: block; }

        nav ul { display: flex; gap: 20px; align-items: center; }
        nav a { color: #333; font-weight: 500; transition: color 0.3s; font-size: 0.95rem; cursor: pointer; }
        nav a:hover { color: #1e40af; }
        
        /* Game Trigger Button in Nav */
        .game-nav-btn {
            background: linear-gradient(45deg, #1e40af, #3b82f6);
            color: white !important;
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 0.9rem;
            box-shadow: 0 4px 10px rgba(30, 64, 175, 0.3);
            transition: all 0.3s ease;
        }
        .game-nav-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 15px rgba(30, 64, 175, 0.5); }

        /* HERO SECTION */
        .hero {
            background: linear-gradient(135deg, #1e40af 0%, #2563eb 100%);
            color: white;
            text-align: center;
            padding: 80px 20px;
            position: relative;
            overflow: hidden;
        }
        /* Abstract circles in background */
        .hero::before {
            content: ''; position: absolute; top: -50px; left: -50px; width: 200px; height: 200px;
            background: rgba(255,255,255,0.1); border-radius: 50%;
        }
        .hero::after {
            content: ''; position: absolute; bottom: -30px; right: -30px; width: 150px; height: 150px;
            background: rgba(255,255,255,0.1); border-radius: 50%;
        }

        .hero h2 { font-size: 2.8rem; margin-bottom: 10px; font-weight: 700; }
        .hero p { font-size: 1.2rem; opacity: 0.95; max-width: 700px; margin: 0 auto 30px auto; }
        
        .hero-btn {
            background: white; color: #1e40af; padding: 14px 35px; border-radius: 30px;
            font-weight: bold; transition: transform 0.3s, box-shadow 0.3s; display: inline-block; margin: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .hero-btn:hover { transform: translateY(-3px); box-shadow: 0 8px 20px rgba(0,0,0,0.3); }

        /* Special Game Button */
        .play-btn {
            background: linear-gradient(90deg, #ff00cc, #333399);
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
            position: relative; overflow: hidden;
        }
        .play-btn:hover { transform: scale(1.05); box-shadow: 0 0 20px #ff00cc; }
        .play-btn i { margin-right: 8px; }

        /* SECTIONS */
        .section-container { max-width: 1100px; margin: 60px auto; padding: 0 20px; }
        .section-title { text-align: center; margin-bottom: 50px; }
        .section-title h2 { color: #1e40af; font-size: 2.2rem; margin-bottom: 15px; position: relative; display: inline-block; }
        .section-title h2::after {
            content: ''; display: block; width: 60px; height: 4px; background: #3b82f6; 
            margin: 10px auto 0; border-radius: 2px;
        }

        /* GRADES GRID */
        .grades-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 30px; }
        .grade-card {
            background: white; border-radius: 15px; padding: 30px; text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05); transition: transform 0.3s, box-shadow 0.3s;
            border-top: 5px solid #3b82f6; position: relative;
        }
        .grade-card:hover { transform: translateY(-10px); box-shadow: 0 20px 40px rgba(0,0,0,0.1); }
        .grade-number { font-size: 2.2rem; font-weight: 800; color: #1e40af; margin-bottom: 5px; }
        .grade-links { margin-top: 20px; display: flex; flex-direction: column; gap: 10px; }
        .grade-links a { 
            padding: 10px; border-radius: 8px; font-size: 0.95rem; font-weight: 500;
            display: flex; align-items: center; justify-content: center; gap: 8px;
        }
        .btn-blue { background: #eff6ff; color: #1e40af; border: 1px solid #dbeafe; }
        .btn-blue:hover { background: #dbeafe; }
        .btn-green { background: #ecfdf5; color: #059669; border: 1px solid #d1fae5; }
        .btn-green:hover { background: #d1fae5; }

        /* TIMETABLE */
        .timetable-wrapper {
            background: white; padding: 30px; border-radius: 15px; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.05); overflow-x: auto;
        }
        .selection-area { margin-bottom: 25px; text-align: center; font-size: 1.1rem; }
        .selection-area select { 
            padding: 10px 20px; font-size: 1rem; border-radius: 8px; border: 2px solid #e5e7eb; 
            outline: none; cursor: pointer; transition: border 0.3s;
        }
        .selection-area select:focus { border-color: #3b82f6; }

        table { width: 100%; border-collapse: collapse; min-width: 700px; }
        th, td { border: 1px solid #e2e8f0; padding: 15px; text-align: center; }
        thead th { background-color: #1e3a8a; color: white; text-transform: uppercase; font-size: 0.9rem; letter-spacing: 1px; }
        tbody tr:nth-child(even) { background-color: #f8fafc; }
        tbody tr:hover { background-color: #eff6ff; }

        /* CONTACT */
        .contact-wrapper { display: flex; flex-wrap: wrap; gap: 40px; }
        .contact-info, .contact-form-box {
            flex: 1; min-width: 320px; background: white; padding: 40px;
            border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.05);
        }
        .info-item { margin-bottom: 25px; display: flex; align-items: flex-start; gap: 20px; }
        .info-item i { 
            width: 45px; height: 45px; background: #eff6ff; color: #1e40af; 
            border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.2rem;
        }
        .contact-form-box input, .contact-form-box textarea {
            width: 100%; padding: 15px; margin-bottom: 20px; border: 2px solid #e5e7eb; 
            border-radius: 8px; font-family: inherit; transition: border 0.3s; box-sizing: border-box;
        }
        .contact-form-box input:focus, .contact-form-box textarea:focus { border-color: #3b82f6; outline: none; }
        .contact-form-box button {
            background: #1e40af; color: white; border: none; padding: 15px;
            border-radius: 8px; cursor: pointer; width: 100%; font-weight: 600; font-size: 1.1rem;
            transition: background 0.3s;
        }
        .contact-form-box button:hover { background: #1e3a8a; }

        footer { background: #111827; color: #9ca3af; text-align: center; padding: 50px 20px; margin-top: 100px; }
        footer p { margin: 10px 0; }

        /* =========================================
           2. OMNI-MIND GAME STYLES (Upgraded & Beautified)
           ========================================= */
        #game-overlay {
            display: none; /* Hidden by default */
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: #050505; z-index: 9999;
            font-family: 'Orbitron', sans-serif;
            color: white;
            justify-content: center; align-items: center;
            opacity: 0; transition: opacity 0.5s ease;
        }
        #game-overlay.active { display: flex; opacity: 1; }

        /* Game Variables */
        #game-overlay {
            --g-blue: #00f3ff;
            --g-pink: #ff00ff;
            --g-gold: #ffd700;
            --g-red: #ff2a2a;
            --g-bg: rgba(10, 10, 20, 0.85);
        }

        /* Dynamic Background Canvas */
        canvas#bg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }

        /* Scanline Effect */
        .scanlines {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none;
            background: linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,0) 50%, rgba(0,0,0,0.1) 50%, rgba(0,0,0,0.1));
            background-size: 100% 4px; z-index: 5; opacity: 0.3;
        }

        /* Main Console Container */
        .console {
            width: 900px; height: 650px;
            background: var(--g-bg);
            border: 2px solid rgba(255,255,255,0.1);
            border-radius: 20px;
            box-shadow: 0 0 50px rgba(0, 243, 255, 0.15), inset 0 0 20px rgba(0,0,0,0.5);
            position: relative; overflow: hidden;
            display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center;
            backdrop-filter: blur(10px);
            transform: scale(0.9); opacity: 0; transition: 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        #game-overlay.active .console { transform: scale(1); opacity: 1; }

        /* Screens */
        .screen {
            position: absolute; width: 100%; height: 100%; padding: 40px;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            transition: 0.4s ease; opacity: 0; pointer-events: none; transform: translateY(20px); z-index: 10;
        }
        .screen.active { opacity: 1; pointer-events: all; transform: translateY(0); }

        /* Typography */
        .g-title {
            font-size: 3.5rem; text-transform: uppercase; font-weight: 900; letter-spacing: 5px;
            background: linear-gradient(to right, var(--g-blue), #fff, var(--g-pink));
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            margin-bottom: 10px; text-shadow: 0 0 20px var(--g-blue);
            animation: glow 3s infinite alternate;
        }
        @keyframes glow { from { text-shadow: 0 0 10px var(--g-blue); } to { text-shadow: 0 0 30px var(--g-pink); } }

        /* Buttons */
        .g-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 25px; margin-top: 40px; width: 100%; max-width: 600px; }
        .g-btn {
            background: rgba(0,0,0,0.6); border: 1px solid var(--g-blue); color: white;
            padding: 20px; font-size: 1.2rem; font-family: 'Orbitron', sans-serif; cursor: pointer;
            transition: 0.3s; text-transform: uppercase; letter-spacing: 2px;
            clip-path: polygon(10% 0, 100% 0, 100% 90%, 90% 100%, 0 100%, 0 10%);
        }
        .g-btn:hover { background: var(--g-blue); color: black; box-shadow: 0 0 30px var(--g-blue); transform: scale(1.05); }
        .g-btn-puzzle { border-color: var(--g-pink); }
        .g-btn-puzzle:hover { background: var(--g-pink); box-shadow: 0 0 30px var(--g-pink); }

        /* HUD */
        .hud {
            position: absolute; top: 0; left: 0; width: 100%; height: 80px;
            display: flex; justify-content: space-between; align-items: center; padding: 0 40px;
            background: linear-gradient(to bottom, rgba(0,0,0,0.8), transparent);
            font-family: 'Roboto Mono'; font-size: 1.5rem; z-index: 20; border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .stat-item { display: flex; align-items: center; gap: 10px; }
        .stat-item i { font-size: 1.2rem; }

        /* Inputs & Quiz */
        .q-box { font-size: 2.2rem; margin: 40px 0; max-width: 90%; line-height: 1.4; text-shadow: 0 0 10px rgba(255,255,255,0.5); }
        #game-inp {
            background: rgba(255,255,255,0.05); border: 1px solid var(--g-blue);
            color: var(--g-blue); font-size: 2rem; text-align: center;
            width: 70%; padding: 15px; font-family: 'Roboto Mono'; outline: none; margin-bottom: 20px;
            box-shadow: 0 0 15px rgba(0, 243, 255, 0.1);
        }
        #game-inp:focus { box-shadow: 0 0 30px rgba(0, 243, 255, 0.3); background: rgba(0, 243, 255, 0.05); }

        /* Puzzle Grid */
        .puzzle-grid { display: grid; grid-template-columns: repeat(3, 100px); gap: 15px; margin: 30px; }
        .tile {
            width: 100px; height: 100px; background: rgba(255,255,255,0.05);
            border: 2px solid var(--g-pink); cursor: pointer; transition: 0.2s; border-radius: 10px;
        }
        .tile:hover { background: rgba(255, 0, 255, 0.2); }
        .tile.active { background: var(--g-pink); box-shadow: 0 0 40px var(--g-pink); transform: scale(1.1); border-color: white; }

        /* Shop Modal */
        .shop-overlay {
            position: absolute; top:0; left:0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95); z-index: 100;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            opacity: 0; pointer-events: none; transition: 0.3s; backdrop-filter: blur(5px);
        }
        .shop-overlay.open { opacity: 1; pointer-events: all; }
        .shop-item {
            width: 70%; background: linear-gradient(90deg, rgba(0,0,0,0.5), rgba(255, 215, 0, 0.1));
            border: 1px solid var(--g-gold); padding: 25px; margin: 15px;
            display: flex; justify-content: space-between; align-items: center;
            cursor: pointer; font-family: 'Roboto Mono'; transition: 0.3s;
        }
        .shop-item:hover { background: rgba(255, 215, 0, 0.2); transform: translateX(10px); }

        /* Utility Buttons */
        .btn-corner {
            position: absolute; padding: 10px 20px; border: 1px solid; background: rgba(0,0,0,0.6);
            cursor: pointer; font-family: 'Orbitron'; font-size: 0.9rem; transition: 0.3s; z-index: 30;
        }
        .btn-close { top: 20px; right: 20px; border-color: var(--g-red); color: var(--g-red); }
        .btn-close:hover { background: var(--g-red); color: white; }
        .btn-shop { bottom: 20px; right: 20px; border-color: var(--g-gold); color: var(--g-gold); }
        .btn-shop:hover { background: var(--g-gold); color: black; }
        .btn-back { top: 20px; left: 20px; border-color: white; color: white; }
        .btn-back:hover { background: white; color: black; }

        /* Animations */
        .shake { animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both; }
        @keyframes shake { 10%, 90% { transform: translate3d(-2px, 0, 0); } 20%, 80% { transform: translate3d(4px, 0, 0); } 30%, 50%, 70% { transform: translate3d(-8px, 0, 0); } 40%, 60% { transform: translate3d(8px, 0, 0); } }

        .correct-flash { animation: flashGreen 0.5s; }
        @keyframes flashGreen { 0% { background: rgba(0, 255, 0, 0); } 50% { background: rgba(0, 255, 0, 0.2); } 100% { background: rgba(0, 255, 0, 0); } }

    </style>
</head>
<body id="home">

    <!-- =========================
         SCHOOL WEBSITE CONTENT
         ========================= -->

    <!-- HEADER -->
    <header>
        <div class="header-container">
            <div class="logo-area">
                <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQBnha5yr1-WJPNyTLxS1IX_aFxntO1R13UT8Fu0hBkgQ&s" alt="SOS Logo">
                <div class="logo-text">
                    <h1>SOS Jimma Primary School</h1>
                    <span>·ä§·àµ·ä¶·ä§·àµ ·åÖ·àõ ·âµ·àù·àÖ·à≠·âµ ·â§·âµ | Hermann Gmeiner School</span>
                </div>
            </div>
            <nav>
                <ul>
                    <li><a href="#home">Home</a></li>
                    <li><a href="#about">About</a></li>
                    <li><a href="#grades">Classes</a></li>
                    <li><a href="#contact">Contact</a></li>
                    <li><a onclick="openGame()" class="game-nav-btn"><i class="fas fa-gamepad"></i> Student Zone</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- HERO SECTION -->
    <section class="hero">
        <h2>A Loving Home for Every Child</h2>
        <p>Providing quality education and care in Jimma, Ethiopia since 2012.</p>
        <p><em>·ã®·àç·àÖ·âÄ·âµ ·àõ·ãï·ä®·àç | ·àà·àÖ·ã≠·ãà·âµ ·ä•·äì·àµ·â∞·àù·à´·àà·äï | Giddu-gala Barnootaa | jireenyaaf barsifna | we educate for life</em></p>
        
        <div style="margin-top: 30px;">
            <a href="#grades" class="hero-btn">View Classes (·ä≠·çç·àé·âΩ)</a>
            <button onclick="openGame()" class="hero-btn play-btn"><i class="fas fa-microchip"></i> Play OMNI-MIND</button>
        </div>
    </section>

    <!-- ABOUT SECTION -->
    <section id="about" class="section-container">
        <div class="section-title">
            <h2>Our History</h2>
            <p>About Hermann Gmeiner & Our Mission</p>
        </div>
        <div class="contact-wrapper"> <!-- Reusing styling -->
            <div class="contact-info" style="width: 100%;">
                <p><strong>Hermann Gmeiner</strong> was the founder of the SOS Children's Village movement. He dedicated his life to providing a nurturing environment for children in need, ensuring they receive education, love, and care. Hermann Gmeiner, an Austrian medical student and World War II veteran, founded SOS Children's Villages in 1949 in Imst, Austria, after witnessing the misery of war orphans living in cold, crowded institutional orphanages. Believing that "every big thing comes from small beginnings," Gmeiner rejected the idea of traditional asylums and instead created a model based on a loving family structure.</p>
                <br>
                <p><strong>SOS Jimma</strong> creates a family-like atmosphere where children can grow and thrive. Our school aims to provide quality education while fostering social and emotional development for students from KG 1 to Grade 12.</p>
            </div>
        </div>
    </section>

    <!-- GRADES SECTION -->
    <section id="grades" class="section-container">
        <div class="section-title">
            <h2>Our Classes</h2>
            <p>Telegram Channels & Parent Groups</p>
        </div>
        
        <div class="grades-grid">
            <!-- Grade 1 -->
            <div class="grade-card">
                <div class="grade-number">Grade 1</div>
                <div>75 Students</div>
                <div class="grade-links">
                    <a href="https://t.me/+gr6zys9V8JEyMGJk" class="btn-blue"><i class="fab fa-telegram"></i> Join Channel</a>
                    <a href="https://t.me/sosjimma_g1parents" class="btn-green"><i class="fas fa-users"></i> Parent Group</a>
                </div>
            </div>
            <!-- Grade 2 -->
            <div class="grade-card">
                <div class="grade-number">Grade 2</div>
                <div>68 Students</div>
                <div class="grade-links">
                    <a href="https://t.me/+dF6uITgd-2UzNjJk" class="btn-blue"><i class="fab fa-telegram"></i> Join Channel</a>
                    <a href="https://t.me/sosjimma_g2parents" class="btn-green"><i class="fas fa-users"></i> Parent Group</a>
                </div>
            </div>
            <!-- Grade 3 -->
            <div class="grade-card">
                <div class="grade-number">Grade 3</div>
                <div>80 Students</div>
                <div class="grade-links">
                    <a href="https://t.me/+gr6zys9V8JEyMGJk" class="btn-blue"><i class="fab fa-telegram"></i> Join Channel</a>
                    <a href="https://t.me/sosjimma_g3parents" class="btn-green"><i class="fas fa-users"></i> Parent Group</a>
                </div>
            </div>
            <!-- Grade 4 -->
            <div class="grade-card">
                <div class="grade-number">Grade 4</div>
                <div>72 Students</div>
                <div class="grade-links">
                    <a href="https://t.me/sosjimmakg1" class="btn-blue"><i class="fab fa-telegram"></i> Join Channel</a>
                    <a href="https://t.me/sosjimma_g4parents" class="btn-green"><i class="fas fa-users"></i> Parent Group</a>
                </div>
            </div>
            <!-- Grade 5 -->
            <div class="grade-card">
                <div class="grade-number">Grade 5</div>
                <div>65 Students</div>
                <div class="grade-links">
                    <a href="https://t.me/sosjimmakg2" class="btn-blue"><i class="fab fa-telegram"></i> Join Channel</a>
                    <a href="https://t.me/sosjimma_g5parents" class="btn-green"><i class="fas fa-users"></i> Parent Group</a>
                </div>
            </div>
            <!-- Grade 6 -->
            <div class="grade-card">
                <div class="grade-number">Grade 6</div>
                <div>70 Students</div>
                <div class="grade-links">
                    <a href=" https://t.me/sosjimmakg3" class="btn-blue"><i class="fab fa-telegram"></i> Join Channel</a>
                    <a href="https://t.me/sosjimma_g6parents" class="btn-green"><i class="fas fa-users"></i> Parent Group</a>
                </div>
            </div>
            <!-- Grade 7 -->
            <div class="grade-card">
                <div class="grade-number">Grade 7</div>
                <div>60 Students</div>
                <div class="grade-links">
                    <a href="https://t.me/mihresosg1" class="btn-blue"><i class="fab fa-telegram"></i> Join Channel</a>
                    <a href="https://t.me/sosjimma_g7parents" class="btn-green"><i class="fas fa-users"></i> Parent Group</a>
                </div>
            </div>
            <!-- Grade 8 -->
            <div class="grade-card">
                <div class="grade-number">Grade 8</div>
                <div>55 Students</div>
                <div class="grade-links">
                    <a href="https://t.me/+Mn8Vc7JEP8FlMGJk" class="btn-blue"><i class="fab fa-telegram"></i> Join Channel</a>
                    <a href="https://t.me/sosjimma_g8parents" class="btn-green"><i class="fas fa-users"></i> Parent Group</a>
                </div>
            </div>
        </div>
    </section>

    <!-- TIMETABLE SECTION -->
    <section class="section-container">
        <div class="section-title">
            <h2>Weekly Subject Outline</h2>
        </div>
        
        <div class="timetable-wrapper">
            <div class="selection-area">
                <label for="gradeSectionSelect">Select Class:</label>
                <select id="gradeSectionSelect"></select>
            </div>
            <div id="timetableContainer"></div>
        </div>
    </section>

    <!-- CONTACT SECTION -->
    <section id="contact" class="section-container">
        <div class="section-title">
            <h2>Contact Us</h2>
            <p>·ä•·ãç·âÇ·ã´ | Quunnamtii</p>
        </div>

        <div class="contact-wrapper">
            <!-- Info Box -->
            <div class="contact-info">
                <h3>Get in Touch</h3>
                <div class="info-item">
                    <i class="fas fa-phone-alt"></i>
                    <div><strong>Managing Principal:</strong><br>0471114881</div>
                </div>
                <div class="info-item">
                    <i class="fas fa-school"></i>
                    <div><strong>Primary School Principal:</strong><br>0478119704</div>
                </div>
                <div class="info-item">
                    <i class="fas fa-file-invoice-dollar"></i>
                    <div><strong>Admin & Finance:</strong><br>+251258156196</div>
                </div>
                <div class="info-item">
                    <i class="fas fa-envelope"></i>
                    <div><strong>Secretary (·â¢·àÆ):</strong><br>0472214445</div>
                </div>
                <hr style="margin: 20px 0; border: 0; border-top: 1px solid #eee;">
                <div>
                    <a href="https://t.me/sosjp" class="btn-green" style="display:inline-block; width:100%; text-align:center;"><i class="fab fa-telegram-plane"></i> SOS Jimma Channel</a>
                </div>
            </div>

            <!-- Contact Form -->
            <div class="contact-form-box">
                <h3>Send a Message</h3>
                <form action="#" method="post">
                    <input type="text" name="name" placeholder="Name (·àµ·àù)" required>
                    <input type="email" name="email" placeholder="Email (·ä¢·àú·ã≠·àç)" required>
                    <textarea name="message" rows="4" placeholder="Message (·àò·àç·ä•·ä≠·âµ)" required></textarea>
                    <button type="submit">Send Message</button>
                </form>
            </div>
        </div>
    </section>

    <!-- FOOTER -->
    <footer>
        <p>&copy; 2025 SOS Jimma Primary. All rights reserved.</p>
        <p>Made with ‚ù§Ô∏è for Education</p>
    </footer>


    <!-- =========================
         OMNI-MIND GAME OVERLAY
         ========================= -->
    <div id="game-overlay">
        <canvas id="bg"></canvas>
        <div class="scanlines"></div>
        
        <button class="btn-corner btn-close" onclick="closeGame()">‚úñ CLOSE SYSTEM</button>

        <div class="console">
            
            <!-- MAIN MENU -->
            <div id="screen-menu" class="screen active">
                <h1 class="g-title">OMNI-MIND</h1>
                <p style="color:var(--g-blue); letter-spacing:3px;">NEURAL TRAINING PROTOCOL v9.0</p>
                <div class="g-grid">
                    <button class="g-btn" onclick="selectCategory('MATH')">MATHEMATICS</button>
                    <button class="g-btn" onclick="selectCategory('ENGLISH')">ENGLISH</button>
                    <button class="g-btn" onclick="selectCategory('LOGIC')">LOGIC</button>
                    <button class="g-btn g-btn-puzzle" onclick="startPuzzleMode()">MEMORY GRID</button>
                </div>
            </div>

            <!-- DIFFICULTY -->
            <div id="screen-diff" class="screen">
                <h2 id="cat-title" style="color:var(--g-blue); font-size:3rem; margin-bottom:10px;">CATEGORY</h2>
                <p style="color:white; margin-bottom:30px;">SELECT LOAD LEVEL</p>
                <div class="g-grid" style="grid-template-columns: 1fr;">
                    <button class="g-btn" onclick="startGame('easy')">EASY (Base Load)</button>
                    <button class="g-btn" onclick="startGame('medium')">MEDIUM (Active Load)</button>
                    <button class="g-btn" onclick="startGame('hard')">HARD (Overclock)</button>
                </div>
                <button class="btn-corner btn-back" onclick="showGameScreen('screen-menu')">‚óÄ BACK</button>
            </div>

            <!-- QUIZ GAME -->
            <div id="screen-quiz" class="screen">
                <div class="hud">
                    <div class="stat-item" style="color:var(--g-red)"><i class="fas fa-heart"></i> <span id="lives">3</span></div>
                    <div class="stat-item" style="color:var(--g-gold)"><i class="fas fa-coins"></i> <span id="coins">0</span></div>
                </div>
                
                <div style="margin-top:50px; color:rgba(255,255,255,0.5); letter-spacing:2px; font-family:'Roboto Mono';" id="game-info">INFO</div>
                <div class="q-box" id="question">Loading...</div>
                
                <input type="text" id="game-inp" placeholder="INPUT ANSWER..." autocomplete="off">
                <button class="g-btn" style="width:50%; padding:15px;" onclick="checkAnswer()">SUBMIT DATA</button>
                <div id="msg-area" style="height:30px; margin-top:20px; font-weight:bold; font-size:1.2rem; font-family:'Roboto Mono';"></div>

                <button class="btn-corner btn-shop" onclick="toggleShop()">üõí ITEM SHOP</button>
                <button class="btn-corner btn-back" onclick="exitToMenu()" style="top:20px; left:20px;">MENU</button>
            </div>

            <!-- PUZZLE GAME -->
            <div id="screen-puzzle" class="screen">
                <div class="hud">
                    <div class="stat-item" style="color:var(--g-red)"><i class="fas fa-heart"></i> <span id="p-lives">3</span></div>
                    <div class="stat-item" style="color:var(--g-gold)"><i class="fas fa-coins"></i> <span id="p-coins">0</span></div>
                </div>
                
                <h2 style="color:var(--g-pink); margin-top:30px;">MEMORY MATRIX</h2>
                <p id="puzzle-status" style="font-family:'Roboto Mono'; margin-bottom:20px;">Initializing...</p>
                
                <div class="puzzle-grid" id="grid"></div>
                <button class="btn-corner btn-back" onclick="exitToMenu()" style="top:20px; left:20px;">MENU</button>
            </div>

            <!-- SHOP MODAL -->
            <div id="shop" class="shop-overlay">
                <h1 style="color:var(--g-gold); font-size:3rem; text-shadow:0 0 20px var(--g-gold);">NEURAL MARKET</h1>
                <p style="margin-bottom:30px; font-family:'Roboto Mono'">AVAILABLE FUNDS: <span id="shop-coins" style="color:var(--g-gold)">0</span> ‚õÉ</p>
                
                <div class="shop-item" onclick="buyItem('life')">
                    <span style="color:white">SYSTEM REPAIR (+1 ‚ù§Ô∏è)</span>
                    <span style="color:var(--g-gold); font-weight:bold;">100 ‚õÉ</span>
                </div>
                
                <button class="g-btn" style="margin-top:30px;" onclick="toggleShop()">CLOSE MARKET</button>
            </div>

            <!-- GAME OVER -->
            <div id="screen-over" class="screen">
                <h1 style="color:var(--g-red); font-size:4rem; text-shadow:0 0 30px var(--g-red);">CRITICAL FAILURE</h1>
                <p>SIMULATION TERMINATED</p>
                <h2 style="margin:20px 0;">SCORE: <span id="final-score" style="color:var(--g-blue)">0</span></h2>
                <button class="g-btn" onclick="showGameScreen('screen-menu')">REBOOT SYSTEM</button>
            </div>

        </div>
    </div>


    <!-- =========================
         JAVASCRIPT LOGIC
         ========================= -->
    <script>
        /* --- 1. TIMETABLE LOGIC (Full Data Restored) --- */
        const timetableData = {
            "1A": {
                "Monday": ["A/orom", "Amh", "Eng", "HPE", "Env.sci", "Scie.En", "Maths"],
                "Tuesday": ["A/orom", "Amh", "Eng", "HPE", "Geda", "Env.sci", "Eng"],
                "Wednesday": ["Art", "Maths", "Geda", "Spoken", "Env.sci", "A/orom", "Maths"],
                "Thursday": ["A/orom", "Amh", "Eng", "Moral", "Eng", "Spoken", "Maths"],
                "Friday": ["Art", "Maths", "Maths", "Env.sci", "Eng", "Spoken"]
            },
            "1B": {
                "Monday": ["Env.sci", "Maths", "Amh", "Eng", "Art", "Maths", "Spoken"],
                "Tuesday": ["Spoken", "Maths", "HPE", "Eng", "A/orom", "Amh", "Moral"],
                "Wednesday": ["Moral", "Env.sci", "Spoken", "HPE", "Eng", "Env.sci", "Amh"],
                "Thursday": ["Moral", "HPE", "A/orom", "Maths", "Env.sci", "Scie.En", "Art"],
                "Friday": ["Amh", "Eng", "HPE", "Maths", "Moral", "Env.sci"]
            },
            "1C": {
                "Monday": ["HPE", "Eng", "Env.sci", "Art", "Moral", "Maths", "Env.sci"],
                "Tuesday": ["A/orom", "Maths", "Env.sci", "Maths", "A/orom", "Moral", "Eng"],
                "Wednesday": ["Amh", "Eng", "Amh", "Amh", "Art", "HPE", "Spoken"],
                "Thursday": ["Eng", "Env.sci", "Eng", "Amh", "Maths", "Scie.En", "Eng"],
                "Friday": ["A/orom", "Maths", "Env.sci", "Art", "Maths", "Moral"]
            },
            "1D": {
                "Monday": ["Eng", "Env.sci", "Amh", "Maths", "Spoken", "A/orom", "Moral"],
                "Tuesday": ["Moral", "Moral", "Env.sci", "A/orom", "Geda", "Maths", "Scie.En"],
                "Wednesday": ["Maths", "Eng", "Env.sci", "Art", "HPE", "Maths", "Spoken"],
                "Thursday": ["Eng", "Maths", "Eng", "Env.sci", "Art", "HPE", "Maths"],
                "Friday": ["Amh", "Maths", "Spoken", "A/orom", "Eng", "Maths"]
            },
            "2A": {
                "Monday": ["A/orom", "HPE", "Maths", "Scie.En", "Maths", "Amh", "Eng"],
                "Tuesday": ["Eng", "Art", "Maths", "Env.sci", "HPE", "Moral", "Spoken"],
                "Wednesday": ["Env.sci", "Amh", "Maths", "A/orom", "Eng", "Geda", "Eng"],
                "Thursday": ["A/orom", "Env.sci", "Eng", "Spoken", "Amh", "Maths", "Env.sci"],
                "Friday": ["Eng", "A/orom", "Maths", "Maths", "Env.sci", "Eng"]
            },
            "2B": {
                "Monday": ["Eng", "Env.sci", "Geda", "Art", "Moral", "Maths", "A/orom"],
                "Tuesday": ["Maths", "Maths", "Spoken", "Eng", "Maths", "Amh", "Maths"],
                "Wednesday": ["Env.sci", "Moral", "A/orom", "Spoken", "Env.sci", "Eng", "Moral"],
                "Thursday": ["Maths", "Eng", "Geda", "Amh", "Maths", "Env.sci", "HPE"],
                "Friday": ["Eng", "HPE", "Eng", "A/orom", "Maths", "Env.sci"]
            },
            "2C": {
                "Monday": ["Env.sci", "Art", "Amh", "HPE", "Eng", "Maths", "Moral"],
                "Tuesday": ["Spoken", "Env.sci", "Eng", "Maths", "Amh", "Maths", "Env.sci"],
                "Wednesday": ["Moral", "Maths", "Spoken", "Env.sci", "A/orom", "Env.sci", "Amh"],
                "Thursday": ["A/orom", "Amh", "Art", "Eng", "Maths", "HPE", "Amh"],
                "Friday": ["A/orom", "Art", "Geda", "Maths", "HPE", "Env.sci"]
            },
            "2D": {
                "Monday": ["Maths", "Amh", "Eng", "Maths", "Env.sci", "A/orom", "Art"],
                "Tuesday": ["HPE", "Art", "HPE", "Maths", "Eng", "Moral", "Amh"],
                "Wednesday": ["Spoken", "Art", "Env.sci", "Amh", "Maths", "Spoken", "Env.sci"],
                "Thursday": ["A/orom", "Amh", "Maths", "Moral", "Env.sci", "Eng", "Art"],
                "Friday": ["Maths", "Amh", "Moral", "Env.sci", "Scie.En", "Amh"]
            },
            "3A": {
                "Monday": ["Geda", "Moral", "Spoken", "Maths", "A/orom", "Env.sci", "Eng"],
                "Tuesday": ["Amh", "Moral", "A/orom", "Eng", "Env.sci", "Maths", "Maths"],
                "Wednesday": ["Eng", "HPE", "Maths", "Spoken", "A/orom", "Env.sci", "Art"],
                "Thursday": ["Maths", "HPE", "Geda", "Env.sci", "A/orom", "ICT", "Eng"],
                "Friday": ["Amh", "Maths", "Eng", "Scie.En", "Eng", "A/orom"]
            },
            "3B": {
                "Monday": ["Spoken", "HPE", "Maths", "Amh", "Eng", "Env.sci", "A/orom"],
                "Tuesday": ["Maths", "Amh", "Moral", "Env.sci", "Art", "Eng", "Spoken"],
                "Wednesday": ["A/orom", "Scie.En", "Env.sci", "Amh", "Maths", "Eng", "Moral"],
                "Thursday": ["Maths", "HPE", "Env.sci", "Moral", "Amh", "Eng", "Maths"],
                "Friday": ["ICT", "Eng", "Maths", "Amh", "Env.sci", "Art"]
            },
            "3C": {
                "Monday": ["Amh", "Moral", "HPE", "Env.sci", "Maths", "Spoken", "Eng"],
                "Tuesday": ["ICT", "Scie.En", "Amh", "Maths", "Maths", "Eng", "HPE"],
                "Wednesday": ["Env.sci", "Spoken", "Art", "Maths", "A/orom", "Maths", "Amh"],
                "Thursday": ["HPE", "Eng", "Moral", "Env.sci", "Art", "Amh", "Maths"],
                "Friday": ["Env.sci", "Spoken", "Art", "Maths", "A/orom", "Maths"]
            },
            "4A": {
                "Monday": ["ICT", "Env.sci", "A/orom", "Eng", "HPE", "Moral", "Maths"],
                "Tuesday": ["Eng", "Env.sci", "Maths", "Art", "A/orom", "Spoken", "Amh"],
                "Wednesday": ["Eng", "A/orom", "Env.sci", "HPE", "Moral", "Art", "Maths"],
                "Thursday": ["Maths", "Scie.En", "Eng", "A/orom", "Amh", "ICT", "Eng"],
                "Friday": ["Maths", "Maths", "Art", "Spoken", "Env.sci", "Amh"]
            },
            "4B": {
                "Monday": ["Eng", "HPE", "A/orom", "Amh", "Env.sci", "Spoken", "Maths"],
                "Tuesday": ["Moral", "Maths", "HPE", "Env.sci", "ICT", "Scie.En", "Amh"],
                "Wednesday": ["Eng", "Amh", "A/orom", "Maths", "Env.sci", "Spoken", "Art"],
                "Thursday": ["Eng", "Amh", "Maths", "Spoken", "A/orom", "Geda", "Amh"],
                "Friday": ["A/orom", "Amh", "Maths", "Maths", "Moral", "Env.sci"]
            },
            "4C": {
                "Monday": ["A/orom", "Amh", "Eng", "Moral", "Maths", "Art", "Env.sci"],
                "Tuesday": ["Amh", "Env.sci", "Eng", "Maths", "HPE", "Moral", "A/orom"],
                "Wednesday": ["Scie.En", "HPE", "Amh", "ICT", "Eng", "Maths", "Maths"],
                "Thursday": ["Art", "Spoken", "Env.sci", "Amh", "Maths", "Moral", "Eng"],
                "Friday": ["Env.sci", "Maths", "Maths", "Art", "Eng", "A/orom"]
            },
            "5A": {
                "Monday": ["Env.sci", "A/orom", "Maths", "Eng", "Amh", "Moral", "Geda"],
                "Tuesday": ["Geda", "Eng", "Env.sci", "Maths", "A/orom", "Spoken", "HPE"],
                "Wednesday": ["Eng", "Maths", "A/orom", "Env.sci", "Maths", "Moral", "Art"],
                "Thursday": ["Eng", "Amh", "Maths", "Scie.En", "Eng", "A/orom", "Moral"],
                "Friday": ["Eng", "Scie.En", "ICT", "Spoken", "A/orom", "Amh"]
            },
            "5B": {
                "Monday": ["Eng", "Env.sci", "Maths", "Amh", "HPE", "ICT", "Art"],
                "Tuesday": ["Maths", "A/orom", "Amh", "Eng", "Env.sci", "Maths", "Spoken"],
                "Wednesday": ["Moral", "Spoken", "Env.sci", "Amh", "HPE", "Maths", "Moral"],
                "Thursday": ["Maths", "Moral", "Amh", "Maths", "Spoken", "Env.sci", "Amh"],
                "Friday": ["Amh", "Maths", "Spoken", "Moral", "Env.sci", "Amh"]
            },
            "5C": {
                "Monday": ["Maths", "Art", "Eng", "Scie.En", "A/orom", "Maths"],
                "Tuesday": ["Amh", "Eng", "Env.sci", "Maths", "HPE", "Moral", "Art"],
                "Wednesday": ["Env.sci", "Art", "Maths", "Maths", "Moral", "Env.sci", "Art"],
                "Thursday": ["Maths", "Spoken", "A/orom", "Env.sci", "Geda", "Maths", "Eng"],
                "Friday": ["Maths", "Maths", "Art", "Eng", "Maths", "HPE"]
            },
            "6A": {
                "Monday": ["Maths", "Env.sci", "A/orom", "ICT", "Maths", "Eng", "Art"],
                "Tuesday": ["Maths", "A/orom", "Art", "Maths", "Amh", "Eng", "Env.sci"],
                "Wednesday": ["HPE", "Amh", "A/orom", "Env.sci", "Maths", "Moral", "HPE"],
                "Thursday": ["Amh", "A/orom", "Env.sci", "Maths", "Moral", "Art", "Eng"],
                "Friday": ["A/orom", "HPE", "Amh", "A/orom", "Env.sci", "Maths"]
            },
            "6B": {
                "Monday": ["Eng", "A/orom", "Maths", "Moral", "Env.sci", "Amh", "Art"],
                "Tuesday": ["Maths", "Spoken", "Maths", "HPE", "Env.sci", "Eng", "Art"],
                "Wednesday": ["Maths", "A/orom", "Maths", "Eng", "Env.sci", "Geda", "Moral"],
                "Thursday": ["Maths", "Maths", "Art", "Spoken", "Env.sci", "Amh", "Moral"],
                "Friday": ["Maths", "Maths", "Eng", "Env.sci", "Env.sci", "Amh"]
            },
            "7A": {
                "Monday": ["Maths", "Geda", "S.sci", "Cit.Ship", "ICT", "Amh", "Spoken"],
                "Tuesday": ["Genera", "ICT", "Vocatio", "Maths", "Geda", "S.sci", "Eng"],
                "Wednesday": ["Art", "S.sci", "Maths", "Genera", "Cit.Ship", "Eng", "A/orom"],
                "Thursday": ["Maths", "Eng", "HPE", "Amh", "A/orom", "Scie.En", "Genera"],
                "Friday": ["A/orom", "Vocati", "Eng", "Genera", "Art", "Maths"]
            },
            "7B": {
                "Monday": ["Maths", "Cit.Ship", "S.sci", "Genera", "Art", "Eng", "A/orom"],
                "Tuesday": ["Genera", "Maths", "Eng", "Amh", "HPE", "S.sci", "Cit.Ship"],
                "Wednesday": ["Scie.En", "Art", "ICT", "Eng", "Maths", "Amh", "Vocatio"],
                "Thursday": ["ICT", "S.sci", "Vocatio", "Cit.Ship", "Genera", "Maths", "Spoken"],
                "Friday": ["Maths", "A/orom", "S.sci", "Amh", "Eng", "Genera"]
            },
            "7C": {
                "Monday": ["Amh", "Spoken", "Genera", "Art", "Maths", "S.sci", "Cit.Ship"],
                "Tuesday": ["Maths", "HPE", "Cit.Ship", "Eng", "S.sci", "Genera", "Vocati"],
                "Wednesday": ["Maths", "Eng", "S.sci", "Genera", "ICT", "Cit.Ship", "Amh"],
                "Thursday": ["Maths", "A/orom", "Eng", "Scie.En", "ICT", "Vocati", "Amh"],
                "Friday": ["Genera", "Art", "A/orom", "Maths", "S.sci", "Eng"]
            },
            "8A": {
                "Monday": ["Cit.Ship", "Maths", "Genera", "A/orom", "Eng", "Geda", "ICT"],
                "Tuesday": ["Eng", "A/orom", "ICT", "Maths", "S.sci", "Spoken", "Genera"],
                "Wednesday": ["Scie.En", "Genera", "Maths", "Art", "Amh", "Art", "A/orom"],
                "Thursday": ["Vocati", "Genera", "Cit.Ship", "Geda", "Maths", "Eng", "S.sci"],
                "Friday": ["Amh", "Maths", "HPE", "Vocatio", "S.sci", "Eng"]
            },
            "8B": {
                "Monday": ["Vocati", "S.sci", "Maths", "Eng", "Scie.En", "Cit.Ship", "Amh"],
                "Tuesday": ["S.sci", "Amh", "Genera", "Cit.Ship", "Eng", "Maths", "A/orom"],
                "Wednesday": ["Art", "Maths", "Eng", "A/orom", "S.sci", "ICT", "Genera"],
                "Thursday": ["Genera", "Genera", "Maths", "S.sci", "Vocati", "Amh", "Eng"],
                "Friday": ["Cit.Ship", "Spoken", "HPE", "Genera", "Art", "Maths"]
            }
        };

        const gradeSectionSelect = document.getElementById('gradeSectionSelect');
        const timetableContainer = document.getElementById('timetableContainer');
        const daysOfWeek = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"];

        function populateGradeSectionDropdown() {
            for (const section in timetableData) {
                const option = document.createElement('option');
                option.value = section;
                option.textContent = section;
                gradeSectionSelect.appendChild(option);
            }
        }

        function displayTimetable(selectedGradeSection) {
            timetableContainer.innerHTML = ''; 
            const timetable = timetableData[selectedGradeSection];
            if (!timetable) {
                timetableContainer.innerHTML = '<p>No data found.</p>';
                return;
            }

            const table = document.createElement('table');
            const thead = document.createElement('thead');
            const tbody = document.createElement('tbody');

            const periodHeaderRow = document.createElement('tr');
            periodHeaderRow.innerHTML = '<th>Day / Period</th>'; 
            for (let i = 1; i <= 7; i++) {
                periodHeaderRow.innerHTML += `<th>${i}</th>`;
            }
            thead.appendChild(periodHeaderRow);

            daysOfWeek.forEach(day => {
                const row = document.createElement('tr');
                const dayHeader = document.createElement('th');
                dayHeader.textContent = day;
                row.appendChild(dayHeader);

                const subjects = timetable[day] || [];
                const maxPeriods = (day === "Friday") ? 6 : 7;

                for (let i = 0; i < maxPeriods; i++) {
                    const cell = document.createElement('td');
                    cell.textContent = subjects[i] || ''; 
                    row.appendChild(cell);
                }
                tbody.appendChild(row);
            });

            table.appendChild(thead);
            table.appendChild(tbody);
            timetableContainer.appendChild(table);
        }

        gradeSectionSelect.addEventListener('change', (event) => {
            displayTimetable(event.target.value);
        });

        /* --- 2. OMNI-MIND GAME LOGIC --- */
        const state = {
            mode: 'menu', cat: '', diff: '', score: 0, lives: 3, coins: 0,
            qData: {}, puzzlePattern: [], playerPattern: []
        };

        // Game Navigation
        function openGame() {
            document.getElementById('game-overlay').classList.add('active');
            document.body.style.overflow = 'hidden';
            initBg();
        }
        function closeGame() {
            document.getElementById('game-overlay').classList.remove('active');
            document.body.style.overflow = 'auto';
        }
        function showGameScreen(id) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }
        function exitToMenu() {
            if(confirm("Abort current simulation?")) showGameScreen('screen-menu');
        }

        // Categories
        function selectCategory(c) {
            state.cat = c;
            document.getElementById('cat-title').innerText = c;
            showGameScreen('screen-diff');
        }
        function startGame(d) {
            state.diff = d; state.lives = 3; state.score = 0; state.mode = 'quiz';
            updateHUD();
            document.getElementById('game-info').innerText = `PROTOCOL: ${state.cat} // LOAD: ${state.diff.toUpperCase()}`;
            showGameScreen('screen-quiz');
            nextQuestion();
        }

        // Quiz Logic
        function nextQuestion() {
            document.getElementById('game-inp').value = "";
            document.getElementById('msg-area').innerText = "";
            document.getElementById('game-inp').focus();
            
            if (state.cat === 'MATH') generateMath();
            else if (state.cat === 'ENGLISH') generateEnglish();
            else if (state.cat === 'LOGIC') generateLogic();
        }

        function generateMath() {
            let x, y, a, q;
            let d = state.diff;
            if(d === 'easy') { x = rdm(1,20); y = rdm(1,20); q = `${x} + ${y}`; a = x+y; }
            else if (d === 'medium') { x = rdm(2,12); y = rdm(2,12); q = `${x} x ${y}`; a = x*y; }
            else { x = rdm(5,20); let r = rdm(30,100); q = `X + ${x} = ${r}`; a = r-x; }
            state.qData = { t: q, a: a.toString() }; renderQ();
        }
        function generateEnglish() {
            const words = ["science", "galaxy", "robot", "future", "system"];
            let w = words[rdm(0, words.length)];
            let s = w.split('').sort(()=>0.5-Math.random()).join('').toUpperCase();
            state.qData = { t: `Unscramble: ${s}`, a: w }; renderQ();
        }
        function generateLogic() {
            const db = [{q:"What has legs but can't walk?",a:"table"}, {q:"What comes down but never up?",a:"rain"}];
            let i = db[rdm(0, db.length)];
            state.qData = { t: i.q, a: i.a }; renderQ();
        }
        function renderQ() { document.getElementById('question').innerText = state.qData.t; }

        function checkAnswer() {
            let u = document.getElementById('game-inp').value.toLowerCase().trim();
            let c = state.qData.a.toLowerCase().trim();
            let msg = document.getElementById('msg-area');
            
            if(u === c) {
                msg.style.color = "#00f3ff"; msg.innerText = "DATA MATCHED! +10 ‚õÉ";
                state.coins += 10; state.score += 100; updateHUD();
                document.querySelector('.console').classList.add('correct-flash');
                setTimeout(() => document.querySelector('.console').classList.remove('correct-flash'), 500);
                setTimeout(nextQuestion, 1000);
            } else {
                msg.style.color = "#ff3333"; msg.innerText = `ERROR. ANS: ${state.qData.a}`;
                document.querySelector('.console').classList.add('shake');
                setTimeout(()=>document.querySelector('.console').classList.remove('shake'), 400);
                loseLife();
            }
        }
        function loseLife() {
            state.lives--; updateHUD();
            if(state.lives <= 0) { showGameScreen('screen-over'); document.getElementById('final-score').innerText = state.score; }
        }

        // Puzzle Logic
        function startPuzzleMode() {
            state.mode = 'puzzle'; state.lives = 3; state.score = 0; updateHUD(); showGameScreen('screen-puzzle');
            const g = document.getElementById('grid'); g.innerHTML = "";
            for(let i=0; i<9; i++) {
                let t = document.createElement('div'); t.className = 'tile'; t.onclick = () => tileClick(i, t); g.appendChild(t);
            }
            nextPuzzleRound();
        }
        function nextPuzzleRound() {
            state.playerPattern = []; state.puzzlePattern = [];
            let steps = 3 + Math.floor(state.score / 200);
            document.getElementById('puzzle-status').innerText = `WATCH SEQUENCE (${steps})...`;
            document.getElementById('puzzle-status').style.color = "#00f3ff";
            
            for(let i=0; i<steps; i++) state.puzzlePattern.push(rdm(0,9));
            let tiles = document.querySelectorAll('.tile');
            state.puzzlePattern.forEach((idx, i) => {
                setTimeout(() => {
                    tiles[idx].classList.add('active');
                    setTimeout(()=>tiles[idx].classList.remove('active'), 300);
                }, 600 * (i+1));
            });
            setTimeout(() => { document.getElementById('puzzle-status').innerText = "REPEAT SEQUENCE!"; document.getElementById('puzzle-status').style.color = "#ff00ff"; }, 600 * (steps+1));
        }
        function tileClick(idx, el) {
            el.classList.add('active'); setTimeout(()=>el.classList.remove('active'), 150);
            state.playerPattern.push(idx);
            let s = state.playerPattern.length - 1;
            if(state.playerPattern[s] !== state.puzzlePattern[s]) {
                document.getElementById('puzzle-status').innerText = "SEQUENCE FAILED";
                document.querySelector('.console').classList.add('shake');
                setTimeout(()=>document.querySelector('.console').classList.remove('shake'), 400);
                loseLife();
                if(state.lives > 0) setTimeout(nextPuzzleRound, 1000); return;
            }
            if(state.playerPattern.length === state.puzzlePattern.length) {
                document.getElementById('puzzle-status').innerText = "COMPLETE! +20 ‚õÉ";
                state.coins += 20; state.score += 50; updateHUD();
                setTimeout(nextPuzzleRound, 1500);
            }
        }

        // Utils
        function rdm(min, max) { return Math.floor(Math.random() * (max - min)) + min; }
        function toggleShop() { 
            document.getElementById('shop').classList.toggle('open'); 
            document.getElementById('shop-coins').innerText = state.coins;
        }
        function buyItem(i) {
            if(i==='life') {
                if(state.coins >= 100) { state.coins-=100; state.lives++; updateHUD(); alert("System Repaired."); }
                else alert("Insufficient Funds.");
            }
            document.getElementById('shop-coins').innerText = state.coins;
        }
        function updateHUD() {
            document.getElementById('lives').innerText = state.lives; document.getElementById('coins').innerText = state.coins;
            document.getElementById('p-lives').innerText = state.lives; document.getElementById('p-coins').innerText = state.coins;
        }
        document.getElementById('game-inp').addEventListener('keydown', (e) => { if(e.key === 'Enter') checkAnswer(); });

        /* --- 3. CANVAS BACKGROUND --- */
        const c = document.getElementById('bg');
        const ctx = c.getContext('2d');
        let particles = [];

        function initBg() {
            c.width = window.innerWidth; c.height = window.innerHeight;
            particles = Array(80).fill().map(() => ({
                x: Math.random()*c.width, y: Math.random()*c.height,
                vy: Math.random()*0.5 + 0.1, size: Math.random()*2
            }));
            anim();
        }
        function anim() {
            if(!document.getElementById('game-overlay').classList.contains('active')) return;
            ctx.fillStyle = "#050505"; ctx.fillRect(0,0,c.width,c.height);
            ctx.fillStyle = "rgba(0, 243, 255, 0.5)";
            particles.forEach(p => {
                p.y += p.vy; if(p.y > c.height) p.y = 0;
                ctx.beginPath(); ctx.arc(p.x, p.y, p.size, 0, Math.PI*2); ctx.fill();
            });
            requestAnimationFrame(anim);
        }

        /* --- INITIALIZATION --- */
        document.addEventListener('DOMContentLoaded', () => {
            populateGradeSectionDropdown();
            // Default select
            if(gradeSectionSelect.options.length > 0) displayTimetable(gradeSectionSelect.value);
        });

    </script>
</body>
</html>
